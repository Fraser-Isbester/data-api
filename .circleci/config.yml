version: 2.1

orbs:
  aws-cli: circleci/aws-cli@1.3.1
  # aws-sam: circleci/aws-sam-serverless@2.1.0
  # aws-s3: circleci/aws-s3@2.0.0

jobs:

  # Configure AWS profile
  aws-cli-setup:
    executor: aws-cli/default
    environment:
      AWS_DEFAULT_REGION: us-west-2
    steps:
      - aws-cli/setup:
          profile-name: circleci
          aws-access-key-id: ACCESS_KEY_ID
          aws-secret-access-key: SECRET_ACCESS_KEY
      - run: echo "Default profile created"
      - run: echo $ACCESS_KEY_ID
      - run: echo $SECRET_ACCESS_KEY

workflows:
  build-on-push:
    jobs:
      - aws-cli-setup:
          context: aws-personal