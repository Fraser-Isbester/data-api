version: 2.1

orbs:
  aws-cli: circleci/aws-cli@1.3.1
  aws-sam: circleci/aws-sam-serverless@2.1.0
  # aws-s3: circleci/aws-s3@2.0.0

jobs:

  # Prep AWS env
  aws-cli-setup:
    executor: aws-cli/default
    steps:
      - checkout
      - aws-cli/setup:
          profile-name: default
          aws-region: us-west-2
          aws-access-key-id: $ACCESS_KEY_ID
          aws-secret-access-key: $SECRET_ACCESS_KEY
      - run: echo "Default profile created"
      - run: echo $ACCESS_KEY_ID
      - run: echo $SECRET_ACCESS_KEY

workflows:
  aws_sam_build:
    jobs:
      - build:
          context: aws-personal